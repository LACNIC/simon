{% extends 'bootstrap.html' %}
{% load staticfiles %}

{% block headers %}
    <!-- Google Charts -->
    {#    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>#}
    <script src="https://www.google.com/jsapi" type="text/javascript"></script>
    <script src="{% static 'bootstrap-datepicker/js/bootstrap-datepicker.js' %}" type="text/javascript"></script>
    <link rel="stylesheet" href="{% static 'bootstrap-datepicker/css/bootstrap-datepicker.css' %}">
{% endblock %}


{% block content %}
    <div class="col-lg-12">
        <h1 class="page-header">Reportes</h1>

        <p>En esta sección se muestran los datos de latencia por país y
            año. Los histogramas pueden presentar uno o varios picos. Para
            aquellos histogramas que presentan un sólo pico, no hay mayores
            conclusiones que sacar: la media de la latencia de la conexión entre
            esos dos países la media del histograma. Pero para aquellos
            histogramas que presentan más de un pico, se puede decir que los
            paquetes viajaron en diferentes tiempos, y muy probablemente haya sido
            por rutas diferentes. Uno de los propósitos de este proyecto es
            identificar esas rutas entre pares de países y dar información acerca
            del impacto que el enrutamiento sub-óptimo causa en sistemas que usan
            Internet y en el usuario final</p>

        <p>
            Las muestras consideradas en estos reportes fueron obtenidas por <a href="{% url 'simon_app.views.participate' %}">la
            contribución de cientos de usuarios</a> en cada uno de los países.
        </p>


        <form class="navbar-form" id="country_form" action="{% url 'simon_app.views.reports' %}" method="post">
            {% csrf_token %}
            {#            {{ form.as_ul }}#}
            {% for field in form %}

                <div class="row">


                    <div class="col-md-4">
                        <div style="margin-top: 0.1em;">
                            <label for="{{ field.label }}">
                                {{ field.label_tag }}
                                {% if field.field.required %}
                                    <span style="font-size: 2em">*</span>
                                {% endif %}
                            </label>

                        </div>
                    </div>

                    <div class="col-md-4">
                        {{ field }}
                    </div>

                    <div class="col-md-4">

                        {% for error in field.errors %}
                            <div class="alert alert-danger" role="alert">
                                <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                                {#                                <span class="sr-only">Error:</span>#}
                                {{ error }}
                            </div>
                        {% endfor %}
                    </div>

                    {#                    <div class="col-md-4" style="color: dimgray">#}
                    {#                        {{ field.help_text }}#}
                    {#                    </div>#}
                </div>
            {% endfor %}
            <input type="submit" value="Submit" id="submit" class="btn btn-default navbar-btn"/>
        </form>


        <h2 class="page-header">Medidor: Javascript</h2>
        <script type="text/javascript">
            {{ latency_histogram_js | safe }}
        </script>
        <div id="latency_histogram_js"></div>


        <h2 class="page-header">Medidor: Applet</h2>
        <script type="text/javascript">
            {{ latency_histogram_applet | safe }}
        </script>
        <div id="latency_histogram_applet"></div>


    </div>


    <script type="application/javascript">
        $("#id_date_from").datepicker({
            format: "dd/mm/yyyy",
            startView: 1,
            language: "es"
        });

        $("#id_date_to").datepicker({
            format: "dd/mm/yyyy",
            startView: 1,
            language: "es"
        });
    </script>

{% endblock %}